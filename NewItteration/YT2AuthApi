

/*
let testToken
function handleCredentialResponse(response) {
    console.log("Encoded JWT ID token: " + response.credential);
    testToken = response.credential;
}

window.onload = function () {
    myclient = google.accounts.id.initialize({
    client_id: "787718893823-ief5upq817odgurk45ga691p9m3ejd57.apps.googleusercontent.com",
    callback: handleCredentialResponse
    });
    google.accounts.id.renderButton(
    document.getElementById("buttonDiv"),
    { theme: "outline", size: "large" }  // customization attributes
    );
    google.accounts.id.prompt(); // also display the One Tap dialog
}
*/

var client;
var access_token;

function initClient() {
    client = google.accounts.oauth2.initTokenClient({
        client_id: "787718893823-ief5upq817odgurk45ga691p9m3ejd57.apps.googleusercontent.com",
        scope: "https://www.googleapis.com/auth/youtube.force-ssl",
        callback: (tokenresponse) => {
            access_token = tokenresponse.access_token;
        },
    });
}
function getToken() {
    client.requestAccessToken();
}
function revokeToken() {
    google.accounts.oauth2.revoke(access_token, () => {console.log('access token revoked')});
}

function test_getSubTitles() {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'https://www.googleapis.com/youtube/v3/captions/9P6rdqiybaw' + "&access_token=" + access_token + '&tlang=' + 'en');
    xhr.onreadystatechange = function(e) {
        console.log(xhr.response);
    }
    xhr.send(null);
}


function test2_getSubtitles() {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', "https://www.googleapis.com/youtube/v3/captions/9P6rdqiybaw")
    xhr.setRequestHeader('Authorization', 'Bearer ' + access_token, 'tlang ' + 'en', 'tfmt ' + "sbv")
    xhr.send();
}